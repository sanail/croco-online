<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4CAF50">
    <title>–ö–æ–º–Ω–∞—Ç–∞ - –ò–≥—Ä–∞ "–ö—Ä–æ–∫–æ–¥–∏–ª"</title>
    
    <!-- Favicons -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- Styles -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="container">
        <header>
            <h1>üêä –ò–≥—Ä–∞ "–ö—Ä–æ–∫–æ–¥–∏–ª"</h1>
            <p class="room-code">–ö–æ–¥ –∫–æ–º–Ω–∞—Ç—ã: <strong id="roomCode" th:text="${roomCode}"></strong></p>
        </header>

        <!-- Join Form (shown before joining) -->
        <div id="joinSection" class="card">
            <h2>–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∏–≥—Ä–µ</h2>
            <form id="joinForm">
                <div class="form-group">
                    <label for="playerName">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è:</label>
                    <input type="text" id="playerName" name="playerName" required 
                           minlength="2" maxlength="50" placeholder="–í–∞—à–µ –∏–º—è">
                </div>
                <button type="submit" class="btn btn-primary">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
            </form>
            <div id="join-error" class="error-message"></div>
        </div>

        <!-- Game Section (shown after joining) -->
        <div id="gameSection" style="display: none;">
            <div class="game-info">
                <div class="info-item">
                    <span class="label">–¢–µ–º–∞:</span>
                    <span id="theme" class="value"></span>
                </div>
                <div class="info-item">
                    <span class="label">–í–µ–¥—É—â–∏–π:</span>
                    <span id="currentLeader" class="value"></span>
                </div>
            </div>

            <!-- Leader View -->
            <div id="leaderView" class="card leader-card" style="display: none;">
                <h2>üé≠ –í—ã –≤–µ–¥—É—â–∏–π!</h2>
                <div id="currentWord" class="current-word">
                    <p class="word-label">–í–∞—à–µ —Å–ª–æ–≤–æ:</p>
                    <p id="wordDisplay" class="word-display">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–≤–∞</p>
                </div>
                <div class="leader-actions">
                    <button id="generateWordBtn" class="btn btn-primary">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤–æ–µ —Å–ª–æ–≤–æ</button>
                </div>
                <div class="assign-winner">
                    <h3>–ù–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è:</h3>
                    <div id="playerButtons" class="player-buttons"></div>
                </div>
            </div>

            <!-- Player View -->
            <div id="playerView" class="card" style="display: none;">
                <h2>–£–≥–∞–¥–∞–π—Ç–µ —Å–ª–æ–≤–æ!</h2>
                <div id="waitingMessage" class="waiting-message">
                    <p>‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–≤–∞ –≤–µ–¥—É—â–∏–º...</p>
                </div>
                <form id="guessForm" style="display: none;">
                    <div class="form-group">
                        <label for="guess">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–∞—Ä–∏–∞–Ω—Ç:</label>
                        <input type="text" id="guess" name="guess" required 
                               placeholder="–í–∞—à –æ—Ç–≤–µ—Ç" autocomplete="off">
                    </div>
                    <button type="submit" class="btn btn-success">–û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç</button>
                </form>
                <div id="guess-feedback" class="feedback-message"></div>
            </div>

            <!-- Players List -->
            <div class="card">
                <h2>–ò–≥—Ä–æ–∫–∏</h2>
                <div id="playersList" class="players-list"></div>
            </div>

            <!-- Leave Button -->
            <div class="actions">
                <button id="leaveBtn" class="btn btn-secondary">–ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É</button>
            </div>
        </div>
    </div>

    <script th:inline="javascript">
        const ROOM_CODE = /*[[${roomCode}]]*/ '';
    </script>
    <script th:src="@{/js/room.js}"></script>
</body>
</html>

